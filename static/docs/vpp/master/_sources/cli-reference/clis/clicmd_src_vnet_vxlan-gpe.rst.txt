.. _clicmd_src_vnet_vxlan-gpe:

===============================================================
Vxlan-gpe cli reference
===============================================================

create vxlan-gpe tunnel
-------------------------------------------------------------------------

.. code-block:: console

    create vxlan-gpe tunnel local <local-addr>  {remote <remote-addr>|group <mcast-addr> <intf-name>} vni <nn> [next-ip4][next-ip6][next-ethernet][next-nsh] [encap-vrf-id <nn>] [decap-vrf-id <nn>] [del]
    



Add or delete a VXLAN-GPE Tunnel.

VXLAN-GPE provides the features needed to allow L2 bridge domains (BDs)
to span multiple servers. This is done by building an L2 overlay on
top of an L3 network underlay using VXLAN-GPE tunnels.

This makes it possible for servers to be co-located in the same data
center or be separated geographically as long as they are reachable
through the underlay L3 network.

You can refer to this kind of L2 overlay bridge domain as a VXLAN-GPE segment.

Example of how to create a VXLAN-GPE Tunnel:


.. code-block:: console

    create vxlan-gpe tunnel local 10.0.3.1 remote 10.0.3.3 vni 13 encap-vrf-id 7


Example of how to delete a VXLAN-GPE Tunnel:


.. code-block:: console

    create vxlan-gpe tunnel local 10.0.3.1 remote 10.0.3.3 vni 13 del



Declaration: ``create_vxlan_gpe_tunnel_command`` `src/vnet/vxlan-gpe/vxlan_gpe.c line 985 <https://github.com/FDio/vpp/blob/master//src/vnet/vxlan-gpe/vxlan_gpe.c#L985>`_

Implementation: ``vxlan_gpe_add_del_tunnel_command_fn``


set interface ip vxlan-gpe-bypass
-------------------------------------------------------------------------

.. code-block:: console

    set interface ip vxlan-gpe-bypass <interface> [del]



This command adds the 'ip4-vxlan-gpe-bypass' graph node for a given
interface. By adding the IPv4 vxlan-gpe-bypass graph node to an interface,
the node checks for and validate input vxlan_gpe packet and bypass
ip4-lookup, ip4-local, ip4-udp-lookup nodes to speedup vxlan_gpe packet
forwarding. This node will cause extra overhead to for non-vxlan_gpe
packets which is kept at a minimum.

Example of graph node before ip4-vxlan-gpe-bypass is enabled:


.. code-block:: console

    show vlib graph ip4-vxlan-gpe-bypass
    
               Name                      Next                    Previous
    ip4-vxlan-gpe-bypass                error-drop [0]
                                   vxlan4-gpe-input [1]
                                    ip4-lookup [2]
    



Example of how to enable ip4-vxlan-gpe-bypass on an interface:


.. code-block:: console

    set interface ip vxlan-gpe-bypass GigabitEthernet2/0/0



Example of graph node after ip4-vxlan-gpe-bypass is enabled:


.. code-block:: console

    show vlib graph ip4-vxlan-gpe-bypass
    
               Name             Next                      Previous
    ip4-vxlan-gpe-bypass       error-drop [0]            ip4-input
                          vxlan4-gpe-input [1]      ip4-input-no-checksum
                           ip4-lookup [2]
    



Example of how to display the feature enabled on an interface:


.. code-block:: console

    show ip interface features GigabitEthernet2/0/0
    
    IP feature paths configured on GigabitEthernet2/0/0...
    ...
    ipv4 unicast:
      ip4-vxlan-gpe-bypass
      ip4-lookup
    ...
    



Example of how to disable ip4-vxlan-gpe-bypass on an interface:


.. code-block:: console

    set interface ip vxlan-gpe-bypass GigabitEthernet2/0/0 del




Declaration: ``set_interface_ip_vxlan_gpe_bypass_command`` `src/vnet/vxlan-gpe/vxlan_gpe.c line 1150 <https://github.com/FDio/vpp/blob/master//src/vnet/vxlan-gpe/vxlan_gpe.c#L1150>`_

Implementation: ``set_ip4_vxlan_gpe_bypass``


set interface ip6 vxlan-gpe-bypass
-------------------------------------------------------------------------

.. code-block:: console

    set interface ip6 vxlan-gpe-bypass <interface> [del]



This command adds the 'ip6-vxlan-gpe-bypass' graph node for a given
interface. By adding the IPv6 vxlan-gpe-bypass graph node to an interface,
the node checks for and validate input vxlan_gpe packet and bypass
ip6-lookup, ip6-local, ip6-udp-lookup nodes to speedup vxlan_gpe packet
forwarding. This node will cause extra overhead to for non-vxlan_gpe packets
which is kept at a minimum.

Example of graph node before ip6-vxlan-gpe-bypass is enabled:


.. code-block:: console

    show vlib graph ip6-vxlan-gpe-bypass
    
               Name                      Next                    Previous
    ip6-vxlan-gpe-bypass                error-drop [0]
                                   vxlan6-gpe-input [1]
                                    ip6-lookup [2]
    



Example of how to enable ip6-vxlan-gpe-bypass on an interface:


.. code-block:: console

    set interface ip6 vxlan-gpe-bypass GigabitEthernet2/0/0



Example of graph node after ip6-vxlan-gpe-bypass is enabled:


.. code-block:: console

    show vlib graph ip6-vxlan-gpe-bypass
    
               Name               Next                    Previous
    ip6-vxlan-gpe-bypass         error-drop [0]          ip6-input
                            vxlan6-gpe-input [1]    ip4-input-no-checksum
                             ip6-lookup [2]
    



Example of how to display the feature enabled on an interface:


.. code-block:: console

    show ip interface features GigabitEthernet2/0/0
    
    IP feature paths configured on GigabitEthernet2/0/0...
    ...
    ipv6 unicast:
      ip6-vxlan-gpe-bypass
      ip6-lookup
    ...
    



Example of how to disable ip6-vxlan-gpe-bypass on an interface:


.. code-block:: console

    set interface ip6 vxlan-gpe-bypass GigabitEthernet2/0/0 del




Declaration: ``set_interface_ip6_vxlan_gpe_bypass_command`` `src/vnet/vxlan-gpe/vxlan_gpe.c line 1208 <https://github.com/FDio/vpp/blob/master//src/vnet/vxlan-gpe/vxlan_gpe.c#L1208>`_

Implementation: ``set_ip6_vxlan_gpe_bypass``



Display all the VXLAN-GPE Tunnel entries.

Example of how to display the VXLAN-GPE Tunnel entries:


.. code-block:: console

    show vxlan-gpe tunnel
    
    [0] local 10.0.3.1 remote 10.0.3.3 vni 13 encap_fib_index 0 sw_if_index 5 decap_next l2
    



Declaration: ``show_vxlan_gpe_tunnel_command`` `src/vnet/vxlan-gpe/vxlan_gpe.c line 1037 <https://github.com/FDio/vpp/blob/master//src/vnet/vxlan-gpe/vxlan_gpe.c#L1037>`_

Implementation: ``show_vxlan_gpe_tunnel_command_fn``

