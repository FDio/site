<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SR LocalSIDs &mdash; The Vector Packet Processor v22.02-rc0-128-g4450b03ba
 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/rules.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="SR-MPLS: Segment Routing for MPLS" href="sr_mpls.html" />
    <link rel="prev" title="SRv6: Segment Routing for IPv6" href="sr_doc.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> The Vector Packet Processor
            <img src="../../../_static/fd-io_red_white.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                v22.02-rc0-128-g4450b03ba

              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">About VPP</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../aboutvpp/scalar-vs-vector-packet-processing.html">Scalar vs Vector packet processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../aboutvpp/extensible.html">The Packet Processing Graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../aboutvpp/networkstack.html">Network Stack Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../aboutvpp/hoststack.html">Host Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../aboutvpp/developer.html">Additional features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../aboutvpp/supported.html">Supported archs and OS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../aboutvpp/performance.html">Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../aboutvpp/releasenotes/index.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../aboutvpp/featurelist.html">VPP Supported Features</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Use Cases</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../usecases/containers/index.html">VPP with Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usecases/simpleperf/index.html">VPP with Iperf3 and TRex</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usecases/vppcloud/index.html">VPP in the Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usecases/vhost/index.html">VPP with Virtual Machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usecases/vmxnet3.html">VPP with VMware/Vmxnet3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usecases/home_gateway.html">VPP as a Home Gateway</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usecases/acls.html">Access Control Lists with VPP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usecases/networksim.html">Generating traffic with VPP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usecases/webapp.html">Web applications with VPP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usecases/container_test.html">Simulating networks with VPP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usecases/trafficgen.html">Stateless Traffic Gen with VPP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usecases/ikev2/index.html">IKEv2 with VPP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usecases/contiv/index.html">VPP in kubernetes (Contiv/Deprecated)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../gettingstarted/installing/index.html">Downloading and Installing VPP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gettingstarted/running/index.html">Running VPP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gettingstarted/progressivevpp/index.html">Progressive VPP Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gettingstarted/troubleshooting/index.html">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../build-run-debug/index.html">Build, Run &amp; Debug</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../corearchitecture/index.html">Core Architecture</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Core Features</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../fib/index.html">The FIB</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Segment routing</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="sr_doc.html">SRv6: Segment Routing for IPv6</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">SR LocalSIDs</a></li>
<li class="toctree-l3"><a class="reference internal" href="sr_mpls.html">SR-MPLS: Segment Routing for MPLS</a></li>
<li class="toctree-l3"><a class="reference internal" href="sr_policy.html">Creating a SR Policy</a></li>
<li class="toctree-l3"><a class="reference internal" href="sr_steering.html">Steering packets into a SR Policy</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../punt.html">Punting Packets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ipsec.html">IPSec (IP Security)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bfd_doc.html">BFD module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ipfix_doc.html">IPFIX support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../span_doc.html">Switched Port Analyzer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mtu.html">MTU in VPP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sylog_doc.html">Syslog protocol support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../eventviewer.html">Event-logger</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stats.html">Statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../selinux_doc.html">SELinux - VPP Custom SELinux Policy</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../plugindoc/index.html">Adding a new plugin or feature</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plugins/index.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devicedrivers/index.html">Device drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tests/overview.html">VPP Test Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extras/index.html">VPP extra tools</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Interfacing with VPP</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../interfacing/binapi/index.html">The binary API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../interfacing/c/index.html">C api client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../interfacing/cpp/index.html">C++ api client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../interfacing/go/index.html">Go api (govpp)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../interfacing/rust/index.html">Rust api client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../interfacing/libmemif/index.html">Memif library (libmemif)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/gitreview.html">Getting a Patch Reviewed</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/writingdocs.html">Writing VPP Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/reportingissues/index.html">Reporting Bugs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Debug CLI</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../cli-reference/gettingstarted/index.html">Getting Started with the debug CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cli-reference/interface/index.html">Interface Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cli-reference/index.html">Reference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Configuration file</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../configuration/config_getting_started.html">Getting started with the configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../configuration/reference.html">Configuration Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">The Vector Packet Processor</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Core Features</a> &raquo;</li>
          <li><a href="index.html">Segment routing</a> &raquo;</li>
      <li>SR LocalSIDs</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/developer/corefeatures/sr/sr_localsid.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="sr-localsids">
<span id="srv6-localsid-doc"></span><h1>SR LocalSIDs<a class="headerlink" href="#sr-localsids" title="Permalink to this headline"></a></h1>
<p>A local SID is associated to a Segment Routing behavior -or function- on
the current node.</p>
<p>The most basic behavior is called END. It simply activates the next SID
in the current packet, by decrementing the Segments Left value and
updating the IPv6 DA.</p>
<p>A local END SID is instantiated using the following CLI:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sr</span> <span class="n">localsid</span> <span class="p">(</span><span class="k">del</span><span class="p">)</span> <span class="n">address</span> <span class="n">XX</span><span class="p">::</span><span class="n">YY</span> <span class="n">behavior</span> <span class="n">end</span>
</pre></div>
</div>
<p>This creates a new entry in the main FIB for IPv6 address XX::YY. All
packets whose IPv6 DA matches this FIB entry are redirected to the
sr-localsid node, where they are processed as described above.</p>
<p>Other examples of local SIDs are the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sr</span> <span class="n">localsid</span> <span class="p">(</span><span class="k">del</span><span class="p">)</span> <span class="n">address</span> <span class="n">XX</span><span class="p">::</span><span class="n">YY</span> <span class="n">behavior</span> <span class="n">end</span>
<span class="n">sr</span> <span class="n">localsid</span> <span class="p">(</span><span class="k">del</span><span class="p">)</span> <span class="n">address</span> <span class="n">XX</span><span class="p">::</span><span class="n">YY</span> <span class="n">behavior</span> <span class="n">end</span><span class="o">.</span><span class="n">x</span> <span class="n">GE0</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span> <span class="mi">2001</span><span class="p">::</span><span class="n">a</span>
<span class="n">sr</span> <span class="n">localsid</span> <span class="p">(</span><span class="k">del</span><span class="p">)</span> <span class="n">address</span> <span class="n">XX</span><span class="p">::</span><span class="n">YY</span> <span class="n">behavior</span> <span class="n">end</span><span class="o">.</span><span class="n">dx6</span> <span class="n">GE0</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span> <span class="mi">2001</span><span class="p">::</span><span class="n">a</span>
<span class="n">sr</span> <span class="n">localsid</span> <span class="p">(</span><span class="k">del</span><span class="p">)</span> <span class="n">address</span> <span class="n">XX</span><span class="p">::</span><span class="n">YY</span> <span class="n">behavior</span> <span class="n">end</span><span class="o">.</span><span class="n">dx4</span> <span class="n">GE0</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span> <span class="mf">10.0.0.1</span>
<span class="n">sr</span> <span class="n">localsid</span> <span class="p">(</span><span class="k">del</span><span class="p">)</span> <span class="n">address</span> <span class="n">XX</span><span class="p">::</span><span class="n">YY</span> <span class="n">behavior</span> <span class="n">end</span><span class="o">.</span><span class="n">dx2</span> <span class="n">GigabitE0</span><span class="o">/</span><span class="mi">11</span><span class="o">/</span><span class="mi">0</span>
<span class="n">sr</span> <span class="n">localsid</span> <span class="p">(</span><span class="k">del</span><span class="p">)</span> <span class="n">address</span> <span class="n">XX</span><span class="p">::</span><span class="n">YY</span> <span class="n">behavior</span> <span class="n">end</span><span class="o">.</span><span class="n">dt6</span> <span class="mi">5</span>
<span class="n">sr</span> <span class="n">localsid</span> <span class="p">(</span><span class="k">del</span><span class="p">)</span> <span class="n">address</span> <span class="n">XX</span><span class="p">::</span><span class="n">YY</span> <span class="n">behavior</span> <span class="n">end</span><span class="o">.</span><span class="n">dt6</span> <span class="mi">5</span>
</pre></div>
</div>
<p>Note that all of these behaviors match the definitions of the SRv6
architecture (<em>draft-filsfils-spring-srv6-network-programming</em>). Please
refer to this document for a detailed description of each behavior.</p>
<p>Note also that you can configure the PSP flavor of the End and End.X
behaviors by typing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sr</span> <span class="n">localsid</span> <span class="p">(</span><span class="k">del</span><span class="p">)</span> <span class="n">address</span> <span class="n">XX</span><span class="p">::</span><span class="n">YY</span> <span class="n">behavior</span> <span class="n">end</span> <span class="n">psp</span>
<span class="n">sr</span> <span class="n">localsid</span> <span class="p">(</span><span class="k">del</span><span class="p">)</span> <span class="n">address</span> <span class="n">XX</span><span class="p">::</span><span class="n">YY</span> <span class="n">behavior</span> <span class="n">end</span><span class="o">.</span><span class="n">x</span> <span class="n">GE0</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span> <span class="mi">2001</span><span class="p">::</span><span class="n">a</span> <span class="n">psp</span>
</pre></div>
</div>
<p>Help on the available local SID behaviors and their usage can be
obtained with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">help</span> <span class="n">sr</span> <span class="n">localsid</span>
</pre></div>
</div>
<p>Alternatively they can be obtained using.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">show</span> <span class="n">sr</span> <span class="n">localsids</span> <span class="n">behavior</span>
</pre></div>
</div>
<p>The difference in between those two commands is that the first one will
only display the SR LocalSID behaviors that are built-in VPP, while the
latter will display those behaviors plus the ones added with the SR
LocalSID Development Framework.</p>
<p>VPP keeps a ‘My LocalSID Table’ where it stores all the SR local SIDs
instantiated as well as their parameters. Every time a new local SID is
instantiated, a new entry is added to this table. In addition, counters
for correctly and incorrectly processed traffic are maintained for each
local SID. The counters store both the number of packets and bytes.</p>
<p>The contents of the ‘My LocalSID Table’ is shown with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vpp</span><span class="c1"># show sr localsid</span>
<span class="n">SRv6</span> <span class="o">-</span> <span class="n">My</span> <span class="n">LocalSID</span> <span class="n">Table</span><span class="p">:</span>
<span class="o">=========================</span>
        <span class="n">Address</span><span class="p">:</span>        <span class="n">c3</span><span class="p">::</span><span class="mi">1</span>
        <span class="n">Behavior</span><span class="p">:</span>       <span class="n">DX6</span> <span class="p">(</span><span class="n">Endpoint</span> <span class="k">with</span> <span class="n">decapsulation</span> <span class="ow">and</span> <span class="n">IPv6</span> <span class="n">cross</span><span class="o">-</span><span class="n">connect</span><span class="p">)</span>
        <span class="n">Iface</span><span class="p">:</span>          <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">5</span><span class="o">/</span><span class="mi">0</span>
        <span class="n">Next</span> <span class="n">hop</span><span class="p">:</span>       <span class="n">b</span><span class="p">:</span><span class="n">c3</span><span class="p">::</span><span class="n">b</span>
        <span class="n">Good</span> <span class="n">traffic</span><span class="p">:</span>   <span class="p">[</span><span class="mi">51277</span> <span class="n">packets</span> <span class="p">:</span> <span class="mi">5332808</span> <span class="nb">bytes</span><span class="p">]</span>
        <span class="n">Bad</span> <span class="n">traffic</span><span class="p">:</span>    <span class="p">[</span><span class="mi">0</span> <span class="n">packets</span> <span class="p">:</span> <span class="mi">0</span> <span class="nb">bytes</span><span class="p">]</span>
<span class="o">--------------------</span>
</pre></div>
</div>
<p>The traffic counters can be reset with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vpp</span><span class="c1"># clear sr localsid-counters</span>
</pre></div>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="sr_doc.html" class="btn btn-neutral float-left" title="SRv6: Segment Routing for IPv6" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="sr_mpls.html" class="btn btn-neutral float-right" title="SR-MPLS: Segment Routing for MPLS" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018-2021, Linux Foundation.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>