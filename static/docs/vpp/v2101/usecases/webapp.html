

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Building VPP web applications &mdash; The Vector Packet Processor 20.01 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/rules.css" type="text/css" />
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Container-based network simulation" href="container_test.html" />
    <link rel="prev" title="Network Simulator Plugin" href="networksim.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> The Vector Packet Processor
          

          
            
            <img src="../_static/fd-io_red_white.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                master
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../whatisvpp/index.html">The Vector Packet Processor (VPP)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../links/index.html">VPP Wiki, Doxygen and Other Links</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Use Cases</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="containers.html">VPP with Containers</a></li>
<li class="toctree-l2"><a class="reference internal" href="simpleperf/index.html">VPP with Iperf3 and TRex</a></li>
<li class="toctree-l2"><a class="reference internal" href="vhost/index.html">FD.io VPP with Virtual Machines</a></li>
<li class="toctree-l2"><a class="reference internal" href="vmxnet3.html">VPP with VMware/Vmxnet3</a></li>
<li class="toctree-l2"><a class="reference internal" href="acls.html">Access Control Lists (ACLs) with FD.io VPP</a></li>
<li class="toctree-l2"><a class="reference internal" href="vppcloud.html">VPP inside the Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="hgw.html">Using VPP as a Home Gateway</a></li>
<li class="toctree-l2"><a class="reference internal" href="contiv/index.html">Contiv/VPP</a></li>
<li class="toctree-l2"><a class="reference internal" href="networksim.html">Network Simulator Plugin</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Building VPP web applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#step-1-add-url-handlers">Step 1: Add URL handlers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-2-register-url-handlers-with-the-server">Step 2: Register URL handlers with the server</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-3-install-hugo-pick-a-theme-and-create-a-site">Step 3: Install Hugo, pick a theme, and create a site</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-4-create-a-rawhtml-shortcode">Step 4: Create a “rawhtml” shortcode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-5-create-hugo-content-which-interacts-with-vpp">Step 5: create Hugo content which interacts with vpp</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-6-compile-the-website">Step 6: compile the website</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-7-configure-vpp">Step 7: configure vpp</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vpp-startup-configuration">vpp startup configuration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="container_test.html">Container-based network simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="trafficgen.html">Vpp Stateless Traffic Generation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../featuresbyrelease/index.html">Features by Release</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting/index.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../events/index.html">Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../relatedprojects/index.html">Related Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../archive/index.html">Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">The Vector Packet Processor</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Use Cases</a> &raquo;</li>
        
      <li>Building VPP web applications</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/usecases/webapp.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="building-vpp-web-applications">
<h1>Building VPP web applications<a class="headerlink" href="#building-vpp-web-applications" title="Permalink to this headline">¶</a></h1>
<p>Vpp includes a versatile http/https “static” server plugin. We quote
the word static in the previous sentence because the server is easily
extended. This note describes how to build a Hugo site which includes
both monitoring and control functions.</p>
<p>Let’s assume that we have a vpp data-plane plugin which needs a
monitoring and control web application. Here’s how to build one.</p>
<div class="section" id="step-1-add-url-handlers">
<h2>Step 1: Add URL handlers<a class="headerlink" href="#step-1-add-url-handlers" title="Permalink to this headline">¶</a></h2>
<p>Individual URL handlers are pretty straightforward. You can
return just about anything you like, but as we work through
the example you’ll see why returning data in .json format
tends to work out pretty well.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">static</span> <span class="nb">int</span>
    <span class="n">handle_get_status</span> <span class="p">(</span><span class="n">http_builtin_method_type_t</span> <span class="n">reqtype</span><span class="p">,</span>
                     <span class="n">u8</span> <span class="o">*</span> <span class="n">request</span><span class="p">,</span> <span class="n">http_session_t</span> <span class="o">*</span> <span class="n">hs</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="n">my_main_t</span> <span class="o">*</span><span class="n">mm</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">my_main</span><span class="p">;</span>
      <span class="n">u8</span> <span class="o">*</span><span class="n">s</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

      <span class="o">/*</span> <span class="n">Construct</span> <span class="n">a</span> <span class="o">.</span><span class="n">json</span> <span class="n">reply</span> <span class="o">*/</span>
      <span class="n">s</span> <span class="o">=</span> <span class="nb">format</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">status</span><span class="se">\&quot;</span><span class="s2">: {&quot;</span><span class="p">);</span>
      <span class="n">s</span> <span class="o">=</span> <span class="nb">format</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s2">&quot;   </span><span class="se">\&quot;</span><span class="s2">thing1</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">,&quot;</span><span class="p">,</span> <span class="n">mm</span><span class="o">-&gt;</span><span class="n">thing1_value_string</span><span class="p">);</span>
      <span class="n">s</span> <span class="o">=</span> <span class="nb">format</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s2">&quot;   </span><span class="se">\&quot;</span><span class="s2">thing2</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">,&quot;</span><span class="p">,</span> <span class="n">mm</span><span class="o">-&gt;</span><span class="n">thing2_value_string</span><span class="p">);</span>
      <span class="o">/*</span> <span class="o">...</span> <span class="n">etc</span> <span class="o">...</span> <span class="o">*/</span>
      <span class="n">s</span> <span class="o">=</span> <span class="nb">format</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s2">&quot;   </span><span class="se">\&quot;</span><span class="s2">lastthing</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">mm</span><span class="o">-&gt;</span><span class="n">last_value_string</span><span class="p">);</span>
      <span class="n">s</span> <span class="o">=</span> <span class="nb">format</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s2">&quot;}}&quot;</span><span class="p">);</span>

      <span class="o">/*</span> <span class="n">And</span> <span class="n">tell</span> <span class="n">the</span> <span class="n">static</span> <span class="n">server</span> <span class="n">plugin</span> <span class="n">how</span> <span class="n">to</span> <span class="n">send</span> <span class="n">the</span> <span class="n">results</span> <span class="o">*/</span>
      <span class="n">hs</span><span class="o">-&gt;</span><span class="n">data</span> <span class="o">=</span> <span class="n">s</span><span class="p">;</span>
      <span class="n">hs</span><span class="o">-&gt;</span><span class="n">data_offset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="n">hs</span><span class="o">-&gt;</span><span class="n">cache_pool_index</span> <span class="o">=</span> <span class="o">~</span><span class="mi">0</span><span class="p">;</span>
      <span class="n">hs</span><span class="o">-&gt;</span><span class="n">free_data</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="o">/*</span> <span class="n">free</span> <span class="n">s</span> <span class="n">when</span> <span class="n">done</span> <span class="k">with</span> <span class="n">it</span><span class="p">,</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">framework</span> <span class="o">*/</span>
      <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>Words to the Wise: Chrome has a very nice set of debugging
tools. Select “More Tools -&gt; Developer Tools”. Right-hand sidebar
appears with html source code, a javascript debugger, network results
including .json objects, and so on.</p>
<p>Note: .json object format is <strong>intolerant</strong> of both missing and extra
commas, missing and extra curly-braces. It’s easy to waste a
considerable amount of time debugging .json bugs.</p>
</div>
<div class="section" id="step-2-register-url-handlers-with-the-server">
<h2>Step 2: Register URL handlers with the server<a class="headerlink" href="#step-2-register-url-handlers-with-the-server" title="Permalink to this headline">¶</a></h2>
<p>Call http_static_server_register_builtin_handler() as shown. It’s
likely but not guaranteed that the static server plugin will be
available.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="nb">int</span>
    <span class="n">plugin_url_init</span> <span class="p">(</span><span class="n">vlib_main_t</span> <span class="o">*</span> <span class="n">vm</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="n">void</span> <span class="p">(</span><span class="o">*</span><span class="n">fp</span><span class="p">)</span> <span class="p">(</span><span class="n">void</span> <span class="o">*</span><span class="p">,</span> <span class="n">char</span> <span class="o">*</span><span class="p">,</span> <span class="nb">int</span><span class="p">);</span>

      <span class="o">/*</span> <span class="n">Look</span> <span class="n">up</span> <span class="n">the</span> <span class="n">builtin</span> <span class="n">URL</span> <span class="n">registration</span> <span class="n">handler</span> <span class="o">*/</span>
      <span class="n">fp</span> <span class="o">=</span> <span class="n">vlib_get_plugin_symbol</span> <span class="p">(</span><span class="s2">&quot;http_static_plugin.so&quot;</span><span class="p">,</span>
    			       <span class="s2">&quot;http_static_server_register_builtin_handler&quot;</span><span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span><span class="n">fp</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
        <span class="p">{</span>
          <span class="n">clib_warning</span> <span class="p">(</span><span class="s2">&quot;http_static_plugin.so not loaded...&quot;</span><span class="p">);</span>
          <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>

      <span class="p">(</span><span class="o">*</span><span class="n">fp</span><span class="p">)</span> <span class="p">(</span><span class="n">handle_get_status</span><span class="p">,</span> <span class="s2">&quot;status.json&quot;</span><span class="p">,</span> <span class="n">HTTP_BUILTIN_METHOD_GET</span><span class="p">);</span>
      <span class="p">(</span><span class="o">*</span><span class="n">fp</span><span class="p">)</span> <span class="p">(</span><span class="n">handle_get_run</span><span class="p">,</span> <span class="s2">&quot;run.json&quot;</span><span class="p">,</span> <span class="n">HTTP_BUILTIN_METHOD_GET</span><span class="p">);</span>
      <span class="p">(</span><span class="o">*</span><span class="n">fp</span><span class="p">)</span> <span class="p">(</span><span class="n">handle_get_reset</span><span class="p">,</span> <span class="s2">&quot;reset.json&quot;</span><span class="p">,</span> <span class="n">HTTP_BUILTIN_METHOD_GET</span><span class="p">);</span>
      <span class="p">(</span><span class="o">*</span><span class="n">fp</span><span class="p">)</span> <span class="p">(</span><span class="n">handle_get_stop</span><span class="p">,</span> <span class="s2">&quot;stop.json&quot;</span><span class="p">,</span> <span class="n">HTTP_BUILTIN_METHOD_GET</span><span class="p">);</span>
      <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>
</pre></div>
</div>
<p>Make sure to start the http static server <strong>before</strong> calling
plugin_url_init(…), or the registrations will disappear.</p>
</div>
<div class="section" id="step-3-install-hugo-pick-a-theme-and-create-a-site">
<h2>Step 3: Install Hugo, pick a theme, and create a site<a class="headerlink" href="#step-3-install-hugo-pick-a-theme-and-create-a-site" title="Permalink to this headline">¶</a></h2>
<p>Please refer to the Hugo documentation.</p>
<p>See <a class="reference external" href="https://gohugo.io/getting-started/quick-start">the Hugo Quick Start
Page</a>. Prebuilt binary
artifacts for many different environments are available on
<a class="reference external" href="https://github.com/gohugoio/hugo/releases">the Hugo release page</a>.</p>
<p>To pick a theme, visit <a class="reference external" href="https://themes.gohugo.io">the Hugo Theme
site</a>. Decide what you need your site to
look like. Stay away from complex themes unless you’re prepared to
spend considerable time tweaking and tuning.</p>
<p>The “Introduction” theme is a good choice for a simple site, YMMV.</p>
</div>
<div class="section" id="step-4-create-a-rawhtml-shortcode">
<h2>Step 4: Create a “rawhtml” shortcode<a class="headerlink" href="#step-4-create-a-rawhtml-shortcode" title="Permalink to this headline">¶</a></h2>
<p>Once you’ve initialized your new site, create the directory
<site-root>/layouts/shortcodes. Create the file “rawhtml.html” in that
directory, with the following contents:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    &lt;!-- raw html --&gt;
    {{.Inner}}
</pre></div>
</div>
<p>This is a key trick which allows a static Hugo site to include
javascript code.</p>
</div>
<div class="section" id="step-5-create-hugo-content-which-interacts-with-vpp">
<h2>Step 5: create Hugo content which interacts with vpp<a class="headerlink" href="#step-5-create-hugo-content-which-interacts-with-vpp" title="Permalink to this headline">¶</a></h2>
<p>Now it’s time to do some web front-end coding in javascript. Of
course, you can create static text, images, etc. as described in the
Hugo documentation. Nothing changes in that respect.</p>
<p>To include dynamically-generated data in your Hugo pages, splat down
some <div> HTML tags, and define a few buttons:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">{{</span><span class="o">&lt;</span> <span class="n">rawhtml</span> <span class="o">&gt;</span><span class="p">}}</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;Thing1&quot;</span><span class="o">&gt;&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;Thing2&quot;</span><span class="o">&gt;&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;Lastthing&quot;</span><span class="o">&gt;&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;Run&quot;</span> <span class="n">onclick</span><span class="o">=</span><span class="s2">&quot;runButtonClick()&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;Reset&quot;</span> <span class="n">onclick</span><span class="o">=</span><span class="s2">&quot;resetButtonClick()&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;Stop&quot;</span> <span class="n">onclick</span><span class="o">=</span><span class="s2">&quot;stopButtonClick()&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;Message&quot;</span><span class="o">&gt;&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
    <span class="p">{{</span><span class="o">&lt;</span> <span class="o">/</span><span class="n">rawhtml</span> <span class="o">&gt;</span><span class="p">}}</span>
</pre></div>
</div>
<p>Time for some javascript code to interact with vpp:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span><span class="o">&lt;</span> <span class="n">rawhtml</span> <span class="o">&gt;</span><span class="p">}}</span>
<span class="o">&lt;</span><span class="n">script</span><span class="o">&gt;</span>
<span class="k">async</span> <span class="n">function</span> <span class="n">getStatusJson</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">pump_url</span> <span class="o">=</span> <span class="n">location</span><span class="o">.</span><span class="n">href</span> <span class="o">+</span> <span class="s2">&quot;status.json&quot;</span><span class="p">;</span>
    <span class="n">const</span> <span class="n">json</span> <span class="o">=</span> <span class="k">await</span> <span class="n">fetch</span><span class="p">(</span><span class="n">pump_url</span><span class="p">,</span> <span class="p">{</span>
        <span class="n">method</span><span class="p">:</span> <span class="s1">&#39;GET&#39;</span><span class="p">,</span>
        <span class="n">mode</span><span class="p">:</span> <span class="s1">&#39;no-cors&#39;</span><span class="p">,</span>
        <span class="n">cache</span><span class="p">:</span> <span class="s1">&#39;no-cache&#39;</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">})</span>
    <span class="o">.</span><span class="n">then</span><span class="p">((</span><span class="n">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
    <span class="o">.</span><span class="n">catch</span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">error</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">status</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">async</span> <span class="n">function</span> <span class="n">sendButton</span><span class="p">(</span><span class="n">which</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">my_url</span> <span class="o">=</span> <span class="n">location</span><span class="o">.</span><span class="n">href</span> <span class="o">+</span> <span class="n">which</span> <span class="o">+</span> <span class="s2">&quot;.json&quot;</span><span class="p">;</span>
    <span class="n">const</span> <span class="n">json</span> <span class="o">=</span> <span class="k">await</span> <span class="n">fetch</span><span class="p">(</span><span class="n">my_url</span><span class="p">,</span> <span class="p">{</span>
        <span class="n">method</span><span class="p">:</span> <span class="s1">&#39;GET&#39;</span><span class="p">,</span>
        <span class="n">mode</span><span class="p">:</span> <span class="s1">&#39;no-cors&#39;</span><span class="p">,</span>
        <span class="n">cache</span><span class="p">:</span> <span class="s1">&#39;no-cache&#39;</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">})</span>
    <span class="o">.</span><span class="n">then</span><span class="p">((</span><span class="n">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
    <span class="o">.</span><span class="n">catch</span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">error</span><span class="p">);</span>
    <span class="p">});</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">message</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">async</span> <span class="n">function</span> <span class="n">getStatus</span><span class="p">()</span> <span class="p">{</span>
      <span class="n">const</span> <span class="n">status</span> <span class="o">=</span> <span class="k">await</span> <span class="n">getStatusJson</span><span class="p">();</span>

      <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s2">&quot;Thing1&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">innerHTML</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">thing1</span><span class="p">;</span>
      <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s2">&quot;Thing2&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">innerHTML</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">thing2</span><span class="p">;</span>
      <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s2">&quot;Lastthing&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">innerHTML</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">lastthing</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">async</span> <span class="n">function</span> <span class="n">runButtonClick</span><span class="p">()</span> <span class="p">{</span>
      <span class="n">const</span> <span class="n">json</span> <span class="o">=</span> <span class="k">await</span> <span class="n">sendButton</span><span class="p">(</span><span class="s2">&quot;run&quot;</span><span class="p">);</span>
      <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s2">&quot;Message&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">innerHTML</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">Message</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">async</span> <span class="n">function</span> <span class="n">resetButtonClick</span><span class="p">()</span> <span class="p">{</span>
      <span class="n">const</span> <span class="n">json</span> <span class="o">=</span> <span class="k">await</span> <span class="n">sendButton</span><span class="p">(</span><span class="s2">&quot;reset&quot;</span><span class="p">);</span>
      <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s2">&quot;Message&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">innerHTML</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">Message</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">async</span> <span class="n">function</span> <span class="n">stopButtonClick</span><span class="p">()</span> <span class="p">{</span>
      <span class="n">const</span> <span class="n">json</span> <span class="o">=</span> <span class="k">await</span> <span class="n">sendButton</span><span class="p">(</span><span class="s2">&quot;stop&quot;</span><span class="p">);</span>
      <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s2">&quot;Message&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">innerHTML</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">Message</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">getStatus</span><span class="p">();</span>

<span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
<span class="p">{{</span><span class="o">&lt;</span> <span class="o">/</span><span class="n">rawhtml</span> <span class="o">&gt;</span><span class="p">}}</span>
</pre></div>
</div>
<p>At this level, javascript coding is pretty simple. Unless you know
exactly what you’re doing, please follow the async function / await
pattern shown above.</p>
</div>
<div class="section" id="step-6-compile-the-website">
<h2>Step 6: compile the website<a class="headerlink" href="#step-6-compile-the-website" title="Permalink to this headline">¶</a></h2>
<p>At the top of the website workspace, simply type “hugo”. The compiled
website lands in the “public” subdirectory.</p>
<p>You can use the Hugo static server - with suitable stub javascript
code - to see what your site will eventually look like. To start the
hugo static server, type “hugo server”. Browse to
“http://localhost:1313”.</p>
</div>
<div class="section" id="step-7-configure-vpp">
<h2>Step 7: configure vpp<a class="headerlink" href="#step-7-configure-vpp" title="Permalink to this headline">¶</a></h2>
<p>In terms of command-line args: you may wish to use poll-sleep-usec 100
to keep the load average low. Totally appropriate if vpp won’t be
processing a lot of packets or handling high-rate http/https traffic.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>   <span class="n">unix</span> <span class="p">{</span>
     <span class="o">...</span>
     <span class="n">poll</span><span class="o">-</span><span class="n">sleep</span><span class="o">-</span><span class="n">usec</span> <span class="mi">100</span>
     <span class="n">startup</span><span class="o">-</span><span class="n">config</span> <span class="o">...</span> <span class="n">see</span> <span class="n">below</span> <span class="o">...</span>
     <span class="o">...</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>If you wish to provide an https site, configure tls. The simplest tls
configuration uses a built-in test certificate - which will annoy
Chrome / Firefox - but it’s sufficient for testing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">tls</span> <span class="p">{</span>
        <span class="n">use</span><span class="o">-</span><span class="n">test</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="ow">in</span><span class="o">-</span><span class="n">ca</span>
    <span class="p">}</span>
</pre></div>
</div>
<div class="section" id="vpp-startup-configuration">
<h3>vpp startup configuration<a class="headerlink" href="#vpp-startup-configuration" title="Permalink to this headline">¶</a></h3>
<p>Enable the vpp static server by way of the startup config mentioned above:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">http</span> <span class="n">static</span> <span class="n">server</span> <span class="n">www</span><span class="o">-</span><span class="n">root</span> <span class="o">/</span><span class="n">myhugosite</span><span class="o">/</span><span class="n">public</span> <span class="n">uri</span> <span class="n">tcp</span><span class="p">:</span><span class="o">//</span><span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">2345</span> <span class="n">cache</span><span class="o">-</span><span class="n">size</span> <span class="mi">5</span><span class="n">m</span> <span class="n">fifo</span><span class="o">-</span><span class="n">size</span> <span class="mi">8192</span>
</pre></div>
</div>
<p>The www-root must be specified, and must correctly name the compiled
hugo site root. If your Hugo site is located at /myhugosite, specify
“www-root /myhugosite/public” in the “http static server” stanza. The
uri shown above binds to TCP port 2345.</p>
<p>If you’re using https, use a uri like “tls://0.0.0.0/443” instead of
the uri shown above.</p>
<p>You may want to add a Linux host interface to view the full-up site locally:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">create</span> <span class="n">tap</span> <span class="n">host</span><span class="o">-</span><span class="k">if</span><span class="o">-</span><span class="n">name</span> <span class="n">lstack</span> <span class="n">host</span><span class="o">-</span><span class="n">ip4</span><span class="o">-</span><span class="n">addr</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">10.2</span><span class="o">/</span><span class="mi">24</span>
    <span class="nb">set</span> <span class="nb">int</span> <span class="n">ip</span> <span class="n">address</span> <span class="n">tap0</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">10.1</span><span class="o">/</span><span class="mi">24</span>
    <span class="nb">set</span> <span class="nb">int</span> <span class="n">state</span> <span class="n">tap0</span> <span class="n">up</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="container_test.html" class="btn btn-neutral float-right" title="Container-based network simulation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="networksim.html" class="btn btn-neutral float-left" title="Network Simulator Plugin" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018-2020, Linux Foundation

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>